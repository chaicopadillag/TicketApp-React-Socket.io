(this["webpackJsonpticket-app"]=this["webpackJsonpticket-app"]||[]).push([[0],{182:function(e,t,c){},290:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(24),s=c.n(r),a=(c(182),c(36)),i=c(162),o=c(6),j=Object(n.createContext)(),l=function(e){var t=e.children,c=function(e){var t=Object(n.useMemo)((function(){return i.io.connect(e,{transport:["websocket"]})}),[e]),c=Object(n.useState)(!1),r=Object(a.a)(c,2),s=r[0],o=r[1];return Object(n.useEffect)((function(){t.on("connect",(function(){o(!0)})),t.on("disconnect",(function(){o(!1)}))}),[t]),{socket:t,online:s}}("https://ticket-cola-app.herokuapp.com/"),r=c.socket,s=c.online;return Object(o.jsx)(j.Provider,{value:{socket:r,online:s},children:t})},b=Object(n.createContext)(),u=function(e){var t=e.children,c=Object(n.useState)(!1),r=Object(a.a)(c,2),s=r[0],i=r[1];return Object(o.jsx)(b.Provider,{value:{hideMenu:s,onHideMenu:function(){i(!0)},onShowMenu:function(){i(!1)}},children:t})},O=c(293),d=c(300),x=c(303),h=c(307),p=c(308),m=c(63),g=c(26),f=c(95),k=c(297),y=c(292),v=c(296),S=c(299),I=c(298),C=c(175),T=c(302),w=function(e){var t=Object(n.useContext)(b),c=t.onHideMenu,r=t.onShowMenu;Object(n.useEffect)((function(){e?c(e):r(e)}),[e,c,r])},E=function(){return{agente:localStorage.getItem("agente"),escritorio:localStorage.getItem("escritorio")}},N=k.a.Title,F=k.a.Text,M={labelCol:{span:4},wrapperCol:{span:8}},z={wrapperCol:{offset:4,span:16}},H=function(){w(!1);var e=Object(g.g)(),t=Object(n.useState)(E()),c=Object(a.a)(t,1)[0];if(c.agente&&c.escritorio)return Object(o.jsx)(g.a,{to:"/escritorio"});return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(N,{level:2,children:"Ingresar"}),Object(o.jsx)(F,{children:"Ingresar tu Nombre y n\xfamero de Escritorio"}),Object(o.jsx)(y.a,{}),Object(o.jsxs)(v.a,Object(f.a)(Object(f.a)({},M),{},{name:"basic",onFinish:function(t){var c=t.agente,n=t.escritorio;localStorage.setItem("agente",c),localStorage.setItem("escritorio",n),e.push("/escritorio")},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(o.jsx)(v.a.Item,{label:"Nombre del Agente",name:"agente",rules:[{required:!0,message:"Por favor ingrese su Nombre!"}],children:Object(o.jsx)(S.a,{})}),Object(o.jsx)(v.a.Item,{label:"Escritorio",name:"escritorio",rules:[{required:!0,message:"Por favor ingrese el n\xfamero de escritorio!"}],children:Object(o.jsx)(I.a,{min:1,max:100})}),Object(o.jsx)(v.a.Item,Object(f.a)(Object(f.a)({},z),{},{children:Object(o.jsxs)(C.a,{type:"primary",htmlType:"submit",shape:"round",children:[Object(o.jsx)(T.a,{}),"Ingresar"]})}))]}))]})},P=c(82),B=c(43),q=c(294),A=c(295),J=c(301),K=c(304),U=c(135),W=c.n(U),D=c(170),G=function(){var e=Object(D.a)(W.a.mark((function e(){var t,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://ticket-cola-app.herokuapp.com/","ultimos"));case 3:if((t=e.sent).ok){e.next=6;break}throw new{status:t.status,statusText:t.statusText};case 6:return e.next=8,t.json();case 8:return c=e.sent,e.abrupt("return",c.tickets);case 12:e.prev=12,e.t0=e.catch(0),console.log("Error en: "+e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),L=k.a.Title,Q=k.a.Text,R=function(){w(!0);var e=Object(n.useState)([]),t=Object(a.a)(e,2),c=t[0],r=t[1],s=Object(n.useContext)(j).socket;return Object(n.useEffect)((function(){return s.on("historial-tickets",(function(e){r(e)})),function(){s.off("historial-tickets")}}),[s]),Object(n.useEffect)((function(){G().then(r)}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(L,{level:1,align:"center",children:"Cola de Clientes"}),Object(o.jsxs)(P.a,{children:[Object(o.jsx)(B.a,{span:12,children:Object(o.jsx)(q.b,{dataSource:c.slice(0,3),renderItem:function(e){return Object(o.jsx)(q.b.Item,{children:Object(o.jsx)(A.a,{style:{width:300,marginTop:16},actions:[Object(o.jsxs)(J.a,{color:"blue",style:{fontSize:13},children:[Object(o.jsx)(x.a,{})," ",e.agente]}),Object(o.jsxs)(J.a,{color:"blue",style:{fontSize:18},children:[Object(o.jsx)(K.a,{})," ",e.escritorio]})],children:Object(o.jsxs)(L,{level:2,type:"secondary",children:["Cliente N\xb0 ",e.numero]})})})}})}),Object(o.jsxs)(B.a,{span:12,children:[Object(o.jsx)(y.a,{children:"Hitorial"}),Object(o.jsx)(q.b,{dataSource:c.slice(3),renderItem:function(e){return Object(o.jsx)(q.b.Item,{children:Object(o.jsx)(q.b.Item.Meta,{title:"Ticket Nro: ".concat(e.numero),description:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(Q,{type:"secondary",children:"En el Escritorio: "}),Object(o.jsx)(J.a,{color:"success",children:e.escritorio}),Object(o.jsx)(Q,{type:"secondary",children:"Agente: "}),Object(o.jsx)(J.a,{color:"green",children:e.agente})]})})})}})]})]})]})},V=c(305),X=k.a.Title,Y=k.a.Text,Z=function(){w(!0);var e=Object(n.useContext)(j).socket,t=Object(n.useState)(null),c=Object(a.a)(t,2),r=c[0],s=c[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(P.a,{children:Object(o.jsxs)(B.a,{span:24,align:"center",children:[Object(o.jsx)(X,{style:{marginBottom:"30px"},children:"Presione el Bot\xf3n para crear un nuevo Ticket"}),Object(o.jsx)(C.a,{type:"primary",shape:"round",icon:Object(o.jsx)(V.a,{}),size:"large",onClick:function(){e.emit("solicitar-ticket",{},(function(e){s(e)}))},children:"Nuevo Ticket"})]})}),Object(o.jsx)(y.a,{}),r&&Object(o.jsx)(P.a,{children:Object(o.jsxs)(B.a,{span:14,offset:5,align:"center",children:[Object(o.jsx)(Y,{level:2,children:"Su Numero: "}),Object(o.jsx)("br",{}),Object(o.jsx)(Y,{type:"success",style:{fontSize:50},children:r.numero})]})})]})},$=c(306),_=c(94),ee=k.a.Title,te=k.a.Text,ce=function(e){var t=e.history;w(!1);var c=Object(n.useContext)(j).socket,r=Object(n.useState)(E()),s=Object(a.a)(r,1)[0],i=Object(n.useState)(null),l=Object(a.a)(i,2),b=l[0],u=l[1];if(!s.agente||!s.escritorio)return Object(o.jsx)(g.a,{to:"/ingregar"});return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(P.a,{children:[Object(o.jsxs)(B.a,{span:20,children:[Object(o.jsx)(ee,{level:2,children:s.agente}),Object(o.jsx)(te,{children:"Ud. est\xe1 trabajando en el Escritorio: "}),Object(o.jsx)(te,{type:"success",children:s.escritorio})]}),Object(o.jsx)(B.a,{span:4,align:"right",children:Object(o.jsxs)(C.a,{shape:"round",type:"danger",onClick:function(){localStorage.clear(),t.replace("/ingresar")},children:["Salir",Object(o.jsx)($.a,{})]})})]}),Object(o.jsx)(y.a,{}),Object(o.jsxs)(P.a,{children:[b&&Object(o.jsxs)(B.a,{span:8,children:[Object(o.jsx)(te,{children:"Esta atendiendo el Ticket numero: "}),Object(o.jsx)(te,{style:{fontSize:20},type:"danger",children:b.numero})]}),Object(o.jsx)(B.a,{span:16,align:"right",children:Object(o.jsxs)(C.a,{onClick:function(){c.emit("siguiente-ticket",s,(function(e){u(e)}))},shape:"round",type:"primary",children:["Siguiente",Object(o.jsx)(_.a,{})]})})]})]})},ne=O.a.Header,re=O.a.Sider,se=O.a.Content,ae=function(){var e=Object(n.useContext)(b).hideMenu;return Object(o.jsx)(m.a,{children:Object(o.jsxs)(O.a,{style:{height:"100vh"},children:[Object(o.jsxs)(re,{collapsedWidth:"0",breakpoint:"md",hidden:e,children:[Object(o.jsx)("div",{className:"logo"}),Object(o.jsxs)(d.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"],children:[Object(o.jsx)(d.a.Item,{icon:Object(o.jsx)(x.a,{}),children:Object(o.jsx)(m.b,{to:"/ingresar",children:"Ingresar"})},"1"),Object(o.jsx)(d.a.Item,{icon:Object(o.jsx)(h.a,{}),children:Object(o.jsx)(m.b,{to:"/cola",children:"Cola"})},"2"),Object(o.jsx)(d.a.Item,{icon:Object(o.jsx)(p.a,{}),children:Object(o.jsx)(m.b,{to:"/crear-ticket",children:"Crear Ticket"})},"3")]})]}),Object(o.jsxs)(O.a,{className:"site-layout",children:[Object(o.jsx)(ne,{className:"site-layout-background",style:{padding:0}}),Object(o.jsx)(se,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280},children:Object(o.jsxs)(g.d,{children:[Object(o.jsx)(g.b,{path:"/ingresar",component:H}),Object(o.jsx)(g.b,{path:"/cola",component:R}),Object(o.jsx)(g.b,{path:"/crear-ticket",component:Z}),Object(o.jsx)(g.b,{path:"/escritorio",component:ce}),Object(o.jsx)(g.a,{to:"/ingresar"})]})})]})]})})},ie=function(){return Object(o.jsx)(l,{children:Object(o.jsx)(u,{children:Object(o.jsx)(ae,{})})})};s.a.render(Object(o.jsx)(ie,{}),document.getElementById("root"))}},[[290,1,2]]]);
//# sourceMappingURL=main.68e7a783.chunk.js.map